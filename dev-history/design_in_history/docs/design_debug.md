# 关于debug函数设计的反思

我们之前采用重新定义的方式来实现debug的控制，我们现在发现有个关键缺陷：

 我们没有办法通过行内环境变量的方法，来短期控制debug行为的改变；这个设计并不好


```bash

X_BASH_STD_JSON=1 work

# 采用子进程，却是保证了环境变量的修改不影响下一个函数，但也使得work函数对外的修改就不能应用到全局
(
    debug.disable json
    work
)

```


经过思考，我们重新采用环境变量来处理。

