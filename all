___X_CMD_ROOT="$HOME/.x-cmd" && (
    BOOT="$HOME/.x-cmd/.rc/boot"
    if [ ! -f "$BOOT" ]; then
        . "$BOOT"
        return 0
    fi

    URL="https://raw.githubusercontent.com/x-cmd/x-cmd/main/dist/all.tgz"

    D="$___X_CMD_ROOT"
    mkdir -p "$D"
    cd "$D"
    if ! curl --fail "$URL" >"all.tgz" 2>/dev/null; then
        printf "Fail to download." >&2
        return 1
    fi
    tar xf "all.tgz"
) && {
    . "${___X_CMD_ROOT}/xrc/latest"
    x boot setup
}
